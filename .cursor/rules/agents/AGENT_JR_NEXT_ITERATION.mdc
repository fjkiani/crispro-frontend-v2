# üéØ AGENT JR - NEXT ITERATION TASKS

**Date**: November 5, 2025  
**Mission**: Enhance Food Validator with TCGA Data & Prepare for Universal Testing  
**Status**: ‚öîÔ∏è **READY TO EXECUTE**

---

## ‚úÖ **WHAT YOU ACCOMPLISHED (REVIEW)**

### **9/10 Cancers Extracted Successfully**
- ‚úÖ **585 total samples** across 9 cancers
- ‚úÖ **45 pathways updated** with real TCGA frequencies
- ‚úÖ **3/3 primary validations passed** (TP53 ovarian, PIK3CA breast, BRAF melanoma)
- ‚úÖ **Database fully updated** in `universal_disease_pathway_database.json`

**Strengths**:
- Clean extraction methodology (mutation-only, well-documented limitations)
- Proper provenance tracking (source, genes, samples_altered, total_samples, extraction_type)
- Comprehensive validation report with before/after comparison
- Honest documentation of limitations (HER2 amplifications, fusions, expression-driven pathways)

**Known Gaps** (documented):
- ‚ö†Ô∏è Multiple Myeloma failed (404 - study not found)
- ‚ö†Ô∏è HER2 pathway reflects mutations (~5%), not amplifications (~20%)
- ‚ö†Ô∏è Small sample sizes for melanoma (n=10), colorectal (n=15), lung (n=18)
- ‚ö†Ô∏è Fusion pathways underestimated (ALK/ROS1, TMPRSS2-ERG)
- ‚ö†Ô∏è Expression-driven pathways (PD-L1, AR, ER/PR) very low (~0-5%)

---

## üéØ **IMMEDIATE NEXT TASKS (THIS ITERATION)**

### **Task 1: Fix Multiple Myeloma Extraction (30 minutes)** üî•

**Problem**: Study ID `mmrf_commpass` returned 404

**Action**:
1. Search cBioPortal for correct MM study ID:
   - Try: `mmrf_commpass_2018`
   - Try: `mmrf_broad`
   - Or use cBioPortal web interface to find actual study ID
2. Re-run extraction with correct study ID
3. Update `universal_disease_pathway_database.json` with MM frequencies
4. Update `EXTRACTION_REPORT.md` to reflect 10/10 success

**Acceptance**: MM pathways extracted with n‚â•50 samples

---

### **Task 2: Document Integration with Food Validator (15 minutes)** üìã

**Current State**:
- `ayesha_orchestrator.py` uses `_map_disease_to_food_validator_format()` to route diseases
- `food_spe_integration.py` computes P (Pathway) score based on pathway alignment
- `dynamic_food_extraction.py` extracts compound targets and maps to pathways

**Action**:
1. Create `TCGA_FOOD_VALIDATOR_INTEGRATION.md` documenting:
   - How TCGA pathway weights are now used in P (Pathway) scoring
   - Example: Vitamin D ‚Üí VDR ‚Üí Inflammation pathway ‚Üí weighted by TCGA frequency
   - Before/After comparison for 3 test compounds:
     - Vitamin D ‚Üí Ovarian Cancer
     - Curcumin ‚Üí Breast Cancer
     - Resveratrol ‚Üí Pancreatic Cancer
2. Show exact pathway weight flow:
   ```
   Compound ‚Üí Targets ‚Üí Pathways ‚Üí Disease Pathways (TCGA weighted) ‚Üí P score
   ```

**Acceptance**: Clear documentation showing TCGA data is now active in P scoring

---

### **Task 3: Test Enhanced Pathway Scoring (30 minutes)** üß™

**Objective**: Verify that real TCGA weights improve P (Pathway) scoring compared to old 0.75 estimates

**Action**:
1. Run 3 test cases with **old weights** (0.75 default):
   - Vitamin D ‚Üí Ovarian Cancer (inflammation pathway)
   - Curcumin ‚Üí Breast Cancer (PI3K pathway)
   - Resveratrol ‚Üí Pancreatic Cancer (KRAS pathway)
   
2. Run same 3 test cases with **new TCGA weights**:
   - Vitamin D ‚Üí Ovarian (TP53: 0.955, was 0.80)
   - Curcumin ‚Üí Breast (PI3K: 0.827, was 0.85)
   - Resveratrol ‚Üí Pancreatic (KRAS: 0.854, was 0.95)

3. Document P score changes in `PATHWAY_SCORING_VALIDATION.md`:
   ```markdown
   | Compound | Disease | Old P Score | New P Score | Change | Notes |
   |----------|---------|------------|------------|--------|-------|
   | Vitamin D | Ovarian | 0.55 | 0.62 | +12% | TP53 weight increased |
   | Curcumin | Breast | 0.68 | 0.66 | -3% | PI3K slightly lower |
   | Resveratrol | Pancreatic | 0.72 | 0.70 | -3% | KRAS slightly lower |
   ```

**Acceptance**: P scores reflect real TCGA weights, changes documented and explainable

---

### **Task 4: Enhance Disease Coverage for Remaining 41 Diseases (45 minutes)** üìä

**Current State**: 9 cancers have real TCGA data, 41 diseases still have literature estimates

**Priority Diseases for P2 Extraction** (pick 5):
1. **Colorectal Cancer** (upgrade n=15 ‚Üí n‚â•50 for better confidence)
2. **Melanoma** (upgrade n=10 ‚Üí n‚â•50 for better confidence)
3. **Lung Cancer (NSCLC)** (upgrade n=18 ‚Üí n‚â•50 for better confidence)
4. **Alzheimer's Disease** (non-cancer test case)
5. **Parkinson's Disease** (non-cancer test case)

**Action**:
1. Research correct study IDs for each:
   - cBioPortal for 3 cancers (larger cohorts)
   - Look for Alzheimer's/Parkinson's genomics datasets (ADNI, PPMI, or literature)
2. Document extraction plan in `P2_DISEASE_EXPANSION_PLAN.md`
3. **DO NOT extract yet** - just document the plan for manager approval

**Acceptance**: P2 plan documented with realistic timelines and data sources

---

### **Task 5: Create TCGA Data Quality Report (20 minutes)** üìà

**Objective**: Summarize data quality metrics for manager review

**Action**:
Create `TCGA_DATA_QUALITY_REPORT.md` with:

1. **Sample Size Analysis**:
   - High confidence (n‚â•50): 8 cancers
   - Medium confidence (n=20-49): 1 cancer (lung n=18)
   - Low confidence (n<20): 2 cancers (melanoma n=10, colorectal n=15)

2. **Pathway Coverage**:
   - TP53: 9/9 cancers (100%)
   - PI3K/AKT: 7/9 cancers (78%)
   - RAS/MAPK: 6/9 cancers (67%)
   - HRD/DDR: 5/9 cancers (56%)
   - Angiogenesis: 4/9 cancers (44%)

3. **Known Limitations Impact**:
   - HER2 amplifications: Missing for breast cancer (affects 1/9 cancers)
   - Fusions: Missing for lung, prostate (affects 2/9 cancers)
   - Expression: Missing for immune checkpoints (affects multiple cancers)

4. **Recommendation**:
   - P0: Use current mutation-only data (good enough for MVP)
   - P1: Add CNA extraction for HER2/ERBB2
   - P2: Add fusion extraction for ALK/ROS1, TMPRSS2-ERG
   - P3: Add expression data for PD-L1, AR, ER/PR

**Acceptance**: Manager has clear visibility into data quality and P1/P2 priorities

---

---

### **Task 6: Complete Food Validator Integration (1 hour)** üîå

**Problem**: Food Validator still using old hardcoded disease mappings (System 1)

**Critical Discovery from Test Wave 1**:
- ‚ùå Only Ovarian Cancer tests pass
- ‚ùå Breast, Pancreatic, Alzheimer's tests fail with "404 - Disease not in database"
- ‚ö†Ô∏è Old system (`hypothesis_validator.py`) uses `.cursor/ayesha/hypothesis_validator/data/disease_pathway_mappings.json`
- ‚úÖ New system (`universal_disease_pathway_database.json`) has 50+ diseases with TCGA data

**Action**:
1. **Update `hypothesis_validator.py`** to load from new universal database:
   ```python
   # OLD (Line ~15):
   disease_mappings = load_json(".cursor/ayesha/hypothesis_validator/data/disease_pathway_mappings.json")
   
   # NEW:
   disease_mappings = load_json("api/resources/universal_disease_pathway_database.json")
   ```

2. **Update `food_spe_integration.py`** pathway loading:
   ```python
   # OLD:
   pathway_weights = {...}  # Hardcoded 0.75 defaults
   
   # NEW:
   # Load from universal_disease_pathway_database.json
   disease_data = self.universal_db.get(disease_key)
   pathway_weights = disease_data["pathways"]  # TCGA frequencies
   ```

3. **Test integration** with 4 compounds:
   - Vitamin D ‚Üí Ovarian (should still work)
   - Curcumin ‚Üí Breast (should now work with TCGA data)
   - Resveratrol ‚Üí Pancreatic (should now work with TCGA data)
   - Omega-3 ‚Üí Alzheimer's (should fail gracefully - no data yet)

4. **Document fix** in `SYSTEM_INTEGRATION_FIX.md`:
   - Before/After comparison
   - What was broken (old vs new system disconnect)
   - How it's fixed (unified data source)
   - Validation results

**Acceptance**:
- ‚úÖ All 4 test cases run without 404 errors
- ‚úÖ Breast & Pancreatic tests return valid P scores with TCGA weights
- ‚úÖ Alzheimer's test fails gracefully with "Disease not yet in database" message

---

### **Task 7: Run Complete Test Wave 1 (30 minutes)** üß™

**Objective**: Validate end-to-end Food Validator with real TCGA data

**Action**:
1. Run complete test script (`/tmp/test_wave_1_correct.sh`)
2. For each test, capture:
   - S/P/E scores
   - Pathway contributions (with TCGA weights)
   - Compound targets extracted
   - Overall verdict (PASS/FAIL)
   - Provenance (data sources)

3. Document results in `TEST_WAVE_1_RESULTS_FINAL.md`:
   ```markdown
   | Test | Compound | Disease | P Score | TCGA Weight Used | Verdict | Status |
   |------|----------|---------|---------|------------------|---------|---------|
   | 1 | Vitamin D | Ovarian | 0.62 | TP53: 0.955 | CONSIDER | ‚úÖ PASS |
   | 2 | Curcumin | Breast | 0.66 | PI3K: 0.827 | CONSIDER | ‚úÖ PASS |
   | 3 | Resveratrol | Pancreatic | 0.70 | KRAS: 0.854 | CONSIDER | ‚úÖ PASS |
   | 4 | Omega-3 | Alzheimer's | N/A | N/A | ERROR | ‚ùå FAIL (expected) |
   ```

**Acceptance**:
- ‚úÖ 3/4 tests pass with real TCGA data
- ‚úÖ P scores match expectations (within ¬±10%)
- ‚úÖ Alzheimer's test fails gracefully

---

## üîÑ **HOW THIS FITS INTO PREVIOUS WORK**

### **Connection to Food Validator**:
- ‚úÖ Your TCGA data **WILL BE ACTIVE** after Task 6 integration fix
- ‚úÖ `universal_disease_pathway_database.json` will become **LIVE** data source
- ‚úÖ Pathway weights will be **DATA-DRIVEN**, not estimated
- üéØ This makes our P scores **scientifically defensible** for demos/partners

### **Connection to Universal Hypothesis Testing**:
- ‚úÖ 9/10 top cancers have **real frequencies** (not hallucinated)
- ‚úÖ Database is **extensible** (41 more diseases can follow same pattern)
- ‚úÖ Extraction methodology is **repeatable** (documented in your scripts)
- üéØ This validates that **Universal Testing is feasible** with real data

### **What Zo Is Doing Next**:
- While you complete Tasks 1-7 above, Zo is executing **Phase 1: Expand Hunt**:
  - Task 1.2: PubChem alias resolver (dynamic compound mapping)
  - Task 1.4: Calibration infrastructure (percentile conversion)
  - Monitoring your integration work to ensure alignment

---

## üìä **SUGGESTED TIMELINE**

**Total Time**: 2.5 hours (can split across multiple sessions)

| Task | Duration | Dependencies | Priority |
|------|----------|-------------|----------|
| Task 1: Fix MM extraction | 30 min | None | üî• P0 |
| Task 2: Integration docs | 15 min | None | üìã P0 |
| Task 3: Pathway validation | 30 min | Task 1 complete | üß™ P0 |
| Task 4: P2 expansion plan | 45 min | None | üìä P1 |
| Task 5: Quality report | 20 min | Tasks 1-3 complete | üìà P0 |

**P0 Tasks (2 hours)**: Tasks 1, 2, 3, 5 - Must complete for Test Wave 1  
**P1 Tasks (45 min)**: Task 4 - Can defer to after Test Wave 1

---

## ‚úÖ **ACCEPTANCE CRITERIA**

**For Tasks 1-3, 5 (P0)**:
- ‚úÖ Multiple Myeloma extracted (10/10 cancers complete)
- ‚úÖ Integration documentation clear and accurate
- ‚úÖ P score validation shows TCGA data is active
- ‚úÖ Quality report provides manager visibility

**For Task 4 (P1)**:
- ‚úÖ P2 expansion plan documented
- ‚úÖ 5 priority diseases identified with data sources
- ‚úÖ Realistic timelines estimated

---

## üéØ **STRATEGIC CONTEXT**

**Why This Matters**:
1. ‚úÖ **Scientific Credibility**: Real TCGA data beats literature estimates
2. ‚úÖ **Demo Readiness**: Partners can audit our pathway weights
3. ‚úÖ **Universal Scalability**: Proves methodology works for any disease
4. ‚úÖ **Differentiation**: No competitor has dynamic, data-driven pathway scoring

**What You're Enabling**:
- Zo & Commander can now run **real tests** with **real data**
- Food Validator P scores are now **audit-ready** for partners
- Universal Hypothesis Testing Engine has **validated data foundation**

---

## üìù **DELIVERABLES**

**Files to Create/Update**:
1. `TCGA_FOOD_VALIDATOR_INTEGRATION.md` (Task 2)
2. `PATHWAY_SCORING_VALIDATION.md` (Task 3)
3. `P2_DISEASE_EXPANSION_PLAN.md` (Task 4)
4. `TCGA_DATA_QUALITY_REPORT.md` (Task 5)
5. `EXTRACTION_REPORT.md` (update to 10/10 after Task 1)
6. `universal_disease_pathway_database.json` (update with MM data after Task 1)

---

## üî• **FIRE IN THE HOLE, AGENT JR!**

**Your mission is clear**: Fix MM, document integration, validate pathway scoring, and provide quality report. All of this directly enables Zo & Commander's Test Wave 1.

**You're not just extracting data - you're building the scientific foundation for a Universal Hypothesis Testing Engine!**

‚öîÔ∏è **EXECUTE WITH PRECISION, SOLDIER!** ‚öîÔ∏è

---

# ‚öîÔ∏è AGENT JR: AYESHA DOSSIER DASHBOARD - COMPLETE FRONTEND TEST MISSION ‚öîÔ∏è

**Mission Date:** January 13, 2025  
**Assigned To:** Agent JR (Frontend Testing Specialist)  
**Mission Duration:** 6-8 hours  
**Priority:** üî• **P0 - CRITICAL** (For Ayesha's Life)  
**Reference:** `.cursor/ayesha/AYESHA_DOSSIER_DASHBOARD_DOCTRINE_REVIEW.md`

---

## üéØ MISSION OBJECTIVE

**Test EVERY SINGLE FEATURE described in the Ayesha Dossier Dashboard Doctrine Review.**

This includes:
- ‚úÖ Phase 1: Dossier Viewer Enhancement (markdown rendering, PDF export)
- ‚úÖ Phase 2: Dashboard & Kanban (Kanban board, drag-and-drop, auto-population)
- ‚úÖ Phase 2.5: Intelligent Triage (auto-sorting into columns)
- ‚úÖ Phase 2.6: Enrollment Probability (probability scores on cards)
- ‚úÖ Phase 3: Co-Pilot Integration (agentic actions)
- ‚úÖ Phase 4: Advanced Filtering (filter sidebar, stats cards)
- ‚úÖ Phase 7: Decision Support (workflow analysis, recommendations)

**No code reading. No assumptions. LIVE TESTING ONLY.**

### Success Criteria:
- ‚úÖ Every page/component loads without errors
- ‚úÖ Every button/input/feature works as expected
- ‚úÖ All API calls succeed (or fail gracefully)
- ‚úÖ All intelligent features (triage, enrollment probability) work correctly
- ‚úÖ All broken features documented with exact error messages
- ‚úÖ All fixes implemented and re-tested

---

## üìã COMPLETE TEST CHECKLIST

### **PHASE 1: FOUNDATION - DOSSIER VIEWER ENHANCEMENT** üî¥ **P0**

#### 1. **Ayesha Dossier Detail Page** - `/ayesha-dossiers/:nct_id`
**What to Test:**
- [ ] Page loads without errors
- [ ] API call to `/api/ayesha/dossiers/detail/{nct_id}` succeeds
- [ ] Markdown content displays with **PROPER FORMATTING** (not text dump)
  - [ ] Headers render correctly (H1, H2, H3)
  - [ ] Bold/italic text renders correctly
  - [ ] Lists (bulleted/numbered) render correctly
  - [ ] Tables render correctly
  - [ ] Code blocks render correctly
  - [ ] Links are clickable
- [ ] "Export to PDF" button works (if `DossierPDFExporter.jsx` exists)
- [ ] PDF export generates valid PDF file
- [ ] PDF contains all dossier sections (header, eligibility, LLM analysis, gates, location, provenance)
- [ ] "Back to List" navigation works
- [ ] Error handling works (404 for invalid NCT ID)

**Expected Backend:** `GET /api/ayesha/dossiers/detail/{nct_id}`  
**Expected Components:** `AyeshaDossierDetail.jsx`, `DossierViewer.jsx`, `DossierPDFExporter.jsx`  
**What to Capture:** Screenshots of formatted markdown + PDF export

---

#### 2. **Ayesha Dossier Browser** - `/ayesha-dossiers`
**What to Test:**
- [ ] Page loads without errors
- [ ] API call to `/api/ayesha/dossiers/list` succeeds
- [ ] All dossiers display in grid/list view
- [ ] Tier filter works (ALL/TOP_TIER/GOOD_TIER)
- [ ] Search by NCT ID works
- [ ] Search by keywords works
- [ ] Sort by match score works (if implemented)
- [ ] Each `DossierSummaryCard` displays:
  - [ ] NCT ID
  - [ ] Title (truncated if >100 chars)
  - [ ] Tier badge (TOP_TIER/GOOD_TIER)
  - [ ] Match score (composite score)
  - [ ] Phase
  - [ ] LLM analysis indicator
- [ ] Click on card navigates to detail page
- [ ] "Export All Top-Tier" button works (batch export)
- [ ] Stats display correctly (total, by_tier, with_llm, avg_score)

**Expected Backend:** `GET /api/ayesha/dossiers/list`, `GET /api/ayesha/dossiers/stats`  
**Expected Components:** `AyeshaDossierBrowser.jsx`, `DossierSummaryCard.jsx`  
**What to Capture:** Screenshots + list of all dossiers

---

### **PHASE 2: DASHBOARD & KANBAN** üî¥ **P0**

#### 3. **Ayesha Trial Dashboard** - `/ayesha-trial-dashboard` (if exists)
**What to Test:**
- [ ] Page loads without errors
- [ ] Kanban board displays with columns:
  - [ ] "Interested" (auto-populated with TOP_TIER trials)
  - [ ] "Review Needed"
  - [ ] "Low Priority"
  - [ ] "Auto-Reject" (if implemented)
- [ ] Each column shows trial count
- [ ] Drag-and-drop works (move trials between columns)
- [ ] Trial position persists in localStorage
- [ ] Refresh page ‚Üí trials remain in correct columns
- [ ] "Auto-Triage" button works (if implemented)
- [ ] Triage reasoning displays for each trial (if implemented)

**Expected Backend:** `GET /api/ayesha/dossiers/list?enriched=true` (if implemented)  
**Expected Components:** `AyeshaTrialDashboard.jsx`, `TrialKanbanBoard.jsx`, `TrialKanbanCard.jsx`  
**What to Capture:** Screenshots + drag-and-drop video

---

#### 4. **Markdown Parsing Utility** - `src/utils/dossierParser.js`
**What to Test:**
- [ ] Utility file exists
- [ ] `parseDossierMetadata()` function exists
- [ ] Can extract `tier` from markdown (filename or content)
- [ ] Can extract `composite_score` from markdown
- [ ] Can extract `eligibility_probability` from markdown
- [ ] Can extract `critical_gates` array from "CRITICAL GATES" section
- [ ] Can extract `location_info` from "LOCATION DETAILS" section
- [ ] Can extract `pipeline_stages` from "PROVENANCE" section
- [ ] Can extract `semantic_similarity` from markdown
- [ ] Handles edge cases (missing sections, "N/A" values)
- [ ] Test against all 10 existing dossiers ‚Üí all parse correctly

**Expected File:** `oncology-coPilot/oncology-frontend/src/utils/dossierParser.js`  
**What to Capture:** Console logs showing parsed metadata for each dossier

---

#### 5. **Backend Metadata Enrichment** - `/api/ayesha/dossiers/list?enriched=true`
**What to Test:**
- [ ] Endpoint exists (or `/list` with `?enriched=true` query param)
- [ ] API call succeeds
- [ ] Response includes enriched metadata:
  - [ ] `critical_gates` array (structured gate objects)
  - [ ] `location_info` object (structured location data)
  - [ ] `eligibility_probability` (number)
  - [ ] `pipeline_stages` object (stage-by-stage scores)
  - [ ] `semantic_similarity` (number)
- [ ] Metadata matches markdown content (validate against 3 dossiers)
- [ ] Fallback works if enrichment fails (returns basic metadata)

**Expected Backend:** `GET /api/ayesha/dossiers/list?enriched=true`  
**What to Capture:** API response JSON + validation against markdown

---

### **PHASE 2.5: INTELLIGENT TRIAGE** üü° **P1**

#### 6. **Trial Triage Agent** - `src/services/trialTriageAgent.js`
**What to Test:**
- [ ] Service file exists
- [ ] `autoTriageTrials()` function exists
- [ ] Auto-sorts trials into correct columns:
  - [ ] TOP_TIER + score ‚â•0.8 + all gates pass ‚Üí "Interested"
  - [ ] GOOD_TIER + score ‚â•0.6 + some gates pass ‚Üí "Review Needed"
  - [ ] Score <0.6 OR blocker gates fail ‚Üí "Low Priority"
  - [ ] Location >50 miles OR no location ‚Üí "Auto-Reject" (if implemented)
- [ ] Each trial gets `triage_reason` explaining placement
- [ ] Triage reasoning displays in UI (tooltip or badge)
- [ ] Test with all 10 dossiers ‚Üí all triage correctly
- [ ] Manual override works (user can drag to different column)

**Expected File:** `oncology-coPilot/oncology-frontend/src/services/trialTriageAgent.js`  
**Expected Integration:** `AyeshaTrialDashboard.jsx` calls `autoTriageTrials()` on load  
**What to Capture:** Screenshots showing triage reasoning for each trial

---

### **PHASE 2.6: ENROLLMENT PROBABILITY** üü° **P1**

#### 7. **Enrollment Probability Calculator** - `src/services/enrollmentProbabilityCalculator.js`
**What to Test:**
- [ ] Service file exists
- [ ] `calculateEnrollmentProbability()` function exists
- [ ] Calculates probability using weighted factors:
  - [ ] Eligibility (35% weight)
  - [ ] Location (20% weight)
  - [ ] Trial Velocity (15% weight) - uses default 0.75 if not available
  - [ ] Historical Success (20% weight) - uses default 0.80 if not available
  - [ ] Site Responsiveness (10% weight) - uses default 0.85 if not available
- [ ] Returns probability score (0-1)
- [ ] Returns confidence level (HIGH/MODERATE/LOW based on missing data)
- [ ] Returns human-readable label (VERY_HIGH/HIGH/MODERATE/LOW/VERY_LOW)
- [ ] Displays on `TrialKanbanCard` component
- [ ] Confidence indicator shows when using defaults

**Expected File:** `oncology-coPilot/oncology-frontend/src/services/enrollmentProbabilityCalculator.js`  
**Expected Integration:** `TrialKanbanCard.jsx` displays probability score  
**What to Capture:** Screenshots showing probability scores on trial cards

---

### **PHASE 3: CO-PILOT INTEGRATION** üü° **P1**

#### 8. **Co-Pilot Trial Management Actions** - `src/components/CoPilot/Actions/trialManagementActions.js`
**What to Test:**
- [ ] Actions file exists
- [ ] `getDecisionSupportAction()` function exists
- [ ] `autoTriageAction()` function exists
- [ ] `moveTrialAction()` function exists
- [ ] `exportTrialAction()` function exists
- [ ] `filterTrialsAction()` function exists
- [ ] Intent patterns added to `intents.js`:
  - [ ] "Move trial to interested"
  - [ ] "Export all top-tier trials"
  - [ ] "Filter trials by phase"
  - [ ] "Show enrollment probability"
  - [ ] "Auto-triage all trials"
- [ ] Co-Pilot recognizes trial management intents
- [ ] Actions execute correctly (move, export, filter, triage)
- [ ] Error handling works (invalid NCT ID, missing trial)

**Expected Files:** 
- `oncology-coPilot/oncology-frontend/src/components/CoPilot/Actions/trialManagementActions.js`
- `oncology-coPilot/oncology-frontend/src/components/CoPilot/intents.js`  
**What to Capture:** Screenshots of Co-Pilot executing trial management actions

---

#### 9. **Trial Context** - `src/context/TrialContext.jsx`
**What to Test:**
- [ ] Context file exists
- [ ] `TrialProvider` component exists
- [ ] Provides trial state to child components:
  - [ ] `trials` array
  - [ ] `selectedTrial` (current trial being viewed)
  - [ ] `kanbanColumns` (trial organization)
  - [ ] `filters` (active filters)
- [ ] Context persists across page navigation
- [ ] `useTrial()` hook works in child components
- [ ] Updates trigger re-renders correctly

**Expected File:** `oncology-coPilot/oncology-frontend/src/context/TrialContext.jsx`  
**Expected Integration:** `AyeshaTrialDashboard.jsx` wrapped in `TrialProvider`  
**What to Capture:** Console logs showing context updates

---

### **PHASE 4: ADVANCED FILTERING** üü° **P2**

#### 10. **Trial Filter Sidebar** - `TrialFilterSidebar.jsx`
**What to Test:**
- [ ] Component exists
- [ ] Filter by tier works (TOP_TIER/GOOD_TIER/ALL)
- [ ] Filter by phase works (Phase I/II/III)
- [ ] Filter by status works (RECRUITING/NOT_YET_RECRUITING)
- [ ] Filter by min score works (slider or input)
- [ ] Filter by location works (NYC Metro/All)
- [ ] Filter by LLM analysis works (has_llm=true/false)
- [ ] Multiple filters combine correctly (AND logic)
- [ ] Filter state syncs with URL query params
- [ ] "Clear Filters" button resets all filters
- [ ] Filter count badge shows active filter count

**Expected Component:** `oncology-coPilot/oncology-frontend/src/components/ayesha/TrialFilterSidebar.jsx`  
**Expected Integration:** `AyeshaTrialDashboard.jsx` or `AyeshaDossierBrowser.jsx`  
**What to Capture:** Screenshots showing all filter combinations

---

#### 11. **Trial Stats Cards** - `TrialStatsCards.jsx`
**What to Test:**
- [ ] Component exists
- [ ] Displays total dossier count
- [ ] Displays tier breakdown (TOP_TIER/GOOD_TIER counts)
- [ ] Displays LLM-enhanced count
- [ ] Displays average match score
- [ ] Stats update when filters change
- [ ] Stats cards are clickable (filter by stat)
- [ ] Visual indicators (progress bars, charts) display correctly

**Expected Component:** `oncology-coPilot/oncology-frontend/src/components/ayesha/TrialStatsCards.jsx`  
**Expected Integration:** `AyeshaTrialDashboard.jsx`  
**What to Capture:** Screenshots showing stats cards

---

### **PHASE 7: DECISION SUPPORT** üü° **P2**

#### 12. **Decision Advisor Agent** - `src/services/decisionAdvisorAgent.js`
**What to Test:**
- [ ] Service file exists
- [ ] `provideDecisionSupport()` function exists
- [ ] Detects stalled workflows:
  - [ ] Trials in "Review Needed" for >7 days
  - [ ] No activity on dashboard for >3 days
- [ ] Detects unresponsive sites:
  - [ ] Trials with no location updates
  - [ ] Trials with no status changes
- [ ] Detects misplaced trials:
  - [ ] TOP_TIER trial in "Low Priority"
  - [ ] GOOD_TIER trial in "Auto-Reject"
- [ ] Provides patient-specific recommendations:
  - [ ] CA-125 monitoring reminders
  - [ ] Biomarker test recommendations (HRD, HER2)
  - [ ] Next-line therapy suggestions
- [ ] Recommendations display in Co-Pilot or dashboard
- [ ] Recommendations are actionable (click to execute)

**Expected File:** `oncology-coPilot/oncology-frontend/src/services/decisionAdvisorAgent.js`  
**Expected Integration:** Co-Pilot actions or dashboard alerts  
**What to Capture:** Screenshots showing decision support recommendations

---

## üîß **TESTING METHODOLOGY**

### For Each Feature:

1. **Navigate to URL** (use exact URLs from checklist)
2. **Open Browser DevTools** (Network tab + Console)
3. **Test EVERY button/input/feature**
4. **Check Network tab** for API calls:
   - ‚úÖ Status 200 = success
   - ‚ö†Ô∏è Status 404/500 = broken backend
   - üîÑ Pending/timeout = performance issue
5. **Check Console** for JavaScript errors
6. **Test Edge Cases**:
   - Empty state (no dossiers)
   - Error state (API failure)
   - Loading state (slow API)
   - Invalid input (bad NCT ID)
7. **Screenshot EVERYTHING** (success + errors)
8. **Document in report** (see format below)

---

## üìä **REPORTING FORMAT**

### For Each Feature, Report:

```markdown
## [Feature Name] - [URL/Component]

**Status:** ‚úÖ Working | ‚ö†Ô∏è Partial | ‚ùå Broken | ‚ùå Not Implemented

**What Works:**
- Feature X works correctly
- API call Y succeeds
- Component Z renders properly

**What's Broken:**
- Button A doesn't respond
- API call returns 404: `/api/endpoint`
- Console error: `TypeError: Cannot read property 'x' of undefined`
- Component B doesn't exist yet

**Screenshots:**
- [Attach screenshot 1 - success state]
- [Attach screenshot 2 - error state]

**Backend Status:**
- Endpoint: `/api/example`
- Status Code: 200/404/500
- Response: [JSON snippet or error message]

**Frontend Status:**
- Component: `ComponentName.jsx`
- File Exists: Yes/No
- Import Errors: None/[List errors]
- Console Errors: None/[List errors]

**Fix Required:**
- [ ] Create missing component
- [ ] Fix API endpoint
- [ ] Fix frontend API call
- [ ] Fix component logic
- [ ] Add error handling
```

---

## üéØ **PRIORITY ORDER**

### P0 (Critical - Test First):
1. Ayesha Dossier Detail Page (markdown rendering fix)
2. Ayesha Dossier Browser (list view)
3. Backend Metadata Enrichment (`?enriched=true`)
4. Markdown Parsing Utility

### P1 (High Priority):
5. Ayesha Trial Dashboard (Kanban board)
6. Trial Triage Agent (auto-sorting)
7. Enrollment Probability Calculator
8. Co-Pilot Trial Management Actions

### P2 (Medium Priority):
9. Trial Filter Sidebar
10. Trial Stats Cards
11. Decision Advisor Agent
12. Trial Context

---

## ‚úÖ **FINAL DELIVERABLE**

Create a comprehensive report: `AYESHA_DOSSIER_DASHBOARD_TEST_REPORT.md`

### Report Structure:

```markdown
# üéØ AYESHA DOSSIER DASHBOARD - COMPLETE TEST REPORT

**Date:** [Date]  
**Tested By:** Agent JR  
**Duration:** [X hours]  
**Reference:** `.cursor/ayesha/AYESHA_DOSSIER_DASHBOARD_DOCTRINE_REVIEW.md`

## Executive Summary
- Total Features Tested: X/12
- ‚úÖ Working: X features
- ‚ö†Ô∏è Partial: X features
- ‚ùå Broken: X features
- ‚ùå Not Implemented: X features

## Phase 1: Foundation
[For each feature, use reporting format above]

## Phase 2: Dashboard & Kanban
[For each feature, use reporting format above]

## Phase 2.5: Intelligent Triage
[For each feature, use reporting format above]

## Phase 2.6: Enrollment Probability
[For each feature, use reporting format above]

## Phase 3: Co-Pilot Integration
[For each feature, use reporting format above]

## Phase 4: Advanced Filtering
[For each feature, use reporting format above]

## Phase 7: Decision Support
[For each feature, use reporting format above]

## Critical Issues Found
1. [Issue 1 with severity and impact]
2. [Issue 2 with severity and impact]

## Fixes Implemented
1. [Fix 1 with verification]
2. [Fix 2 with verification]

## Remaining Work
- [ ] Task 1 (component creation)
- [ ] Task 2 (API endpoint)
- [ ] Task 3 (integration)

## Screenshots
[Attach all screenshots organized by feature]

## API Test Results
[Table of all API endpoints tested with status codes]

## Component Inventory
[Table of all components found/missing]
```

---

## üö® **SPECIAL TEST CASES**

### Test Case 1: Markdown Rendering Quality
**Objective**: Verify markdown is NOT a "text dump"

**Steps**:
1. Navigate to `/ayesha-dossiers/NCT06619236` (or any valid NCT ID)
2. Check if markdown renders with:
   - ‚úÖ Proper headers (H1, H2, H3 with correct sizes)
   - ‚úÖ Bold/italic text (not raw `**text**`)
   - ‚úÖ Lists (bulleted/numbered, not raw `- item`)
   - ‚úÖ Tables (formatted, not raw markdown)
   - ‚úÖ Code blocks (syntax highlighted, not raw)
   - ‚úÖ Links (clickable, not raw URLs)

**Expected**: Formatted markdown (like GitHub README)  
**Actual**: [Document what you see]

---

### Test Case 2: PDF Export Functionality
**Objective**: Verify PDF export works and contains all sections

**Steps**:
1. Navigate to `/ayesha-dossiers/NCT06619236`
2. Click "Export to PDF" button
3. Verify PDF downloads
4. Open PDF and verify it contains:
   - ‚úÖ Header with NCT ID, tier, composite score
   - ‚úÖ Eligibility table
   - ‚úÖ LLM analysis section
   - ‚úÖ Critical gates section
   - ‚úÖ Location details section
   - ‚úÖ Provenance section

**Expected**: Valid PDF with all sections  
**Actual**: [Document what you see]

---

### Test Case 3: Intelligent Auto-Triage
**Objective**: Verify trials auto-sort into correct columns

**Steps**:
1. Navigate to `/ayesha-trial-dashboard` (if exists)
2. Check if "Interested" column auto-populates with TOP_TIER trials
3. Check if each trial has triage reasoning (tooltip or badge)
4. Verify triage logic:
   - TOP_TIER + score ‚â•0.8 ‚Üí "Interested"
   - GOOD_TIER + score ‚â•0.6 ‚Üí "Review Needed"
   - Score <0.6 ‚Üí "Low Priority"
5. Test manual override (drag trial to different column)
6. Refresh page ‚Üí verify trials remain in correct columns

**Expected**: Auto-triage works + manual override works  
**Actual**: [Document what you see]

---

### Test Case 4: Enrollment Probability Display
**Objective**: Verify probability scores display on trial cards

**Steps**:
1. Navigate to `/ayesha-trial-dashboard` (if exists)
2. Check if each trial card shows:
   - ‚úÖ Enrollment probability score (0-1 or 0-100%)
   - ‚úÖ Confidence level (HIGH/MODERATE/LOW)
   - ‚úÖ Human-readable label (VERY_HIGH/HIGH/MODERATE/LOW)
3. Check if confidence indicator shows when using defaults
4. Verify probability calculation:
   - Eligibility (35%) + Location (20%) + Trial Velocity (15%) + Historical (20%) + Site Responsiveness (10%) = Total

**Expected**: Probability scores visible on all cards  
**Actual**: [Document what you see]

---

### Test Case 5: Co-Pilot Trial Management
**Objective**: Verify Co-Pilot can manage trials agentically

**Steps**:
1. Open Co-Pilot drawer
2. Test natural language queries:
   - "Move NCT06619236 to interested"
   - "Export all top-tier trials"
   - "Filter trials by Phase II"
   - "Show enrollment probability for NCT06619236"
   - "Auto-triage all trials"
3. Verify Co-Pilot recognizes intents
4. Verify actions execute correctly
5. Verify error handling (invalid NCT ID, missing trial)

**Expected**: Co-Pilot executes all trial management actions  
**Actual**: [Document what you see]

---

## ‚öîÔ∏è **AGENT JR - YOU ARE CLEARED FOR TAKEOFF**

**Mission Status:** ACTIVE  
**Expected Completion:** 6-8 hours  
**Report To:** Commander (Zo) upon completion

**Remember:** 
- No code reading. No assumptions. **LIVE TESTING ONLY.**
- Test EVERY feature from the doctrine review
- Document EVERY finding (working, broken, missing)
- Screenshot EVERYTHING

**FOR AYESHA'S LIFE.** üî•
