================================================================================
TIMING ENGINE VALIDATION - TRULY INDEPENDENT DATA
NO CIRCULAR DEPENDENCY
================================================================================

Patients with independent data: 274
  - Last platinum date: from Last day of platinum 1st line
  - Recurrence date: from days_to_tumor_recurrence
  - Ground truth PFI kept separate for comparison

Created 274 regimens using INDEPENDENT dates

================================================================================
Running timing engine...
================================================================================

Timing engine completed: 274 regimens

================================================================================
VALIDATION RESULTS - INDEPENDENT DATA
================================================================================

Total patients: 274

PFI DAYS ACCURACY:
  Exact match (0 days):  258/274 (94.2%)
  Within 7 days:         258/274 (94.2%)
  Within 30 days:        258/274 (94.2%)
  Mean absolute error:   9.4 days
  Median absolute error: 0.0 days

CATEGORY ACCURACY:
  Correct category: 262/274 (95.6%)

CONFUSION MATRIX:
Computed      6-12m  <6m  >12m  All
Ground Truth                       
6-12m            76    1     0   77
<6m               0   87     1   88
>12m              0    1    99  100
All              76   89   100  265

SAMPLE DISCREPANCIES (first 10):

  TCGA-24-1560
    Computed: 26 days (<6m)
    Ground truth: 281 days (6-12m)
    Difference: -255 days

  TCGA-24-2029
    Computed: 318 days (6-12m)
    Ground truth: 221 days (6-12m)
    Difference: 97 days

  TCGA-24-2036
    Computed: 761 days (>12m)
    Ground truth: 439 days (>12m)
    Difference: 322 days

  TCGA-29-1766
    Computed: 484 days (>12m)
    Ground truth: 35 days (<6m)
    Difference: 449 days

  TCGA-31-1953
    Computed: 5 days (<6m)
    Ground truth: 139 days (<6m)
    Difference: -134 days

  TCGA-61-2009
    Computed: 18 days (<6m)
    Ground truth: 756 days (>12m)
    Difference: -738 days

  TCGA-61-2104
    Computed: 1549 days (>12m)
    Ground truth: 1065 days (>12m)
    Difference: 484 days

================================================================================
CONCLUSION
================================================================================

✅ VALIDATION PASSED - Category accuracy ≥95%

Results saved to: oncology-coPilot/oncology-backend-minimal/api/services/resistance/timing_engine_real_validation.csv