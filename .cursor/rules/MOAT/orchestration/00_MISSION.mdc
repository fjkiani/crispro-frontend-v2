---
alwaysApply: false
description: MOAT Orchestration System Mission - Complete agentic oncology orchestration
globs:
---

# ğŸ¯ MOAT ORCHESTRATION SYSTEM: MISSION

**Date:** January 28, 2025  
**Owner:** Orchestration Team  
**Status:** âœ… **ACTIVE** - Foundation complete, agents in progress  
**Priority:** CRITICAL

---

## ğŸ“Œ EXECUTIVE SUMMARY

**Mission:** Build a complete agentic orchestration system that transforms raw genomic data into actionable clinical intelligence through autonomous agents, continuous monitoring, and unified care planning.

**Vision:**
> **"Upload once. Track forever. Never miss a signal."**

A patient's genomic data enters the system once. From that moment, an agentic swarm takes over - calculating biomarkers, predicting resistance, matching trials, generating nutrition plans, and continuously monitoring for signals that require action. The oncologist receives actionable intelligence, not raw data.

**Current State:**
- âœ… **Foundation:** 100% Complete (Orchestrator, State Management, API Contracts)
- â³ **Core Agents:** 60% Complete (7/14 agents integrated)
- â³ **Frontend:** 20% Complete (OrchestratorDashboard verified, Universal Pages need integration)
- â³ **Advanced Features:** 20% Complete

---

## ğŸ¯ MISSION OBJECTIVE

Build a production-ready orchestration system that:

1. **Ingests Data Once** - Parse VCF/PDF/MAF files, extract mutations and clinical data
2. **Runs Autonomous Agents** - Biomarker calculation, resistance prediction, drug ranking, trial matching, nutrition planning
3. **Generates Unified Care Plans** - Aggregates all agent outputs into actionable recommendations
4. **Monitors Continuously** - Tracks biomarkers, detects resistance signals, triggers alerts
5. **Provides Real-Time Intelligence** - Dashboard, status updates, event triggers

### **Success Criteria:**

1. âœ… **Foundation Complete**
   - Orchestrator core built and tested
   - State management working
   - API endpoints defined and working

2. â³ **All Agents Integrated**
   - Data Extraction, Biomarker, Resistance, Drug Efficacy, Trial Matching, Nutrition, Care Plan, Monitoring
   - All agents can run end-to-end
   - Parallel execution where dependencies allow

3. â³ **Frontend Integration**
   - OrchestratorDashboard verified and working
   - Universal Pages integrated with orchestrator
   - Real-time status updates working

4. â³ **Production Ready**
   - Security & compliance measures in place
   - End-to-end testing complete
   - Performance benchmarks met

---

## ğŸ—ï¸ ARCHITECTURE

### The Orchestrator Core

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         ORCHESTRATOR AGENT              â”‚
                    â”‚  â€¢ Patient state management             â”‚
                    â”‚  â€¢ Agent coordination                   â”‚
                    â”‚  â€¢ Parallel execution                   â”‚
                    â”‚  â€¢ Audit trail                          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚                               â”‚
        â–¼                               â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 1       â”‚             â”‚ PHASE 2       â”‚             â”‚ PHASE 3+      â”‚
â”‚ Extraction    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Analysis      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Ranking, etc. â”‚
â”‚               â”‚             â”‚ (parallel)    â”‚             â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ VCF Parser  â”‚             â”‚ â€¢ Biomarker   â”‚             â”‚ â€¢ Drug Rank   â”‚
â”‚ â€¢ PDF Parser  â”‚             â”‚ â€¢ Resistance  â”‚             â”‚ â€¢ Trials      â”‚
â”‚ â€¢ MAF Parser  â”‚             â”‚ â€¢ Nutrition   â”‚             â”‚ â€¢ Care Plan   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7-Phase Pipeline

```
1. INITIALIZED â†’ Patient created
2. EXTRACTING â†’ Parse files, extract mutations
3. ANALYZING â†’ Biomarker + Resistance + Nutrition (PARALLEL)
4. RANKING â†’ Drug Efficacy (S/P/E)
5. MATCHING â†’ Trial Matching
6. PLANNING â†’ Care Plan Generation
7. MONITORING â†’ Monitoring Setup
8. COMPLETE â†’ All done!
```

---

## ğŸ“Š THE COMPLETE MOAT STACK

### Layer 1: Validated Biomarker Capabilities âœ…

| Capability | Validation | Status |
|------------|------------|--------|
| TMB Calculation | r=0.933, 95.4% accuracy | âœ… Production |
| TMB-H Classification | Validated against TCGA | âœ… Production |
| MAPK Resistance | RR=1.97, p<0.05 | âœ… Production |
| HRD Inference | MBD4 + BRCA logic | âœ… Production |

### Layer 2: Clinical Intelligence Capabilities âœ…

| Capability | Source | Status |
|------------|--------|--------|
| Toxicity-Nutrition | Drug MoA + Food DB | âœ… Production (needs orchestrator integration) |
| Trial Matching | ClinicalTrials.gov API | âœ… Production |
| SOC Recommendations | NCCN Guidelines | âœ… Production |
| Drug Efficacy (S/P/E) | Evo2 + Pathway + Evidence | âœ… Production (needs orchestrator integration) |

### Layer 3: Agentic Monitoring Capabilities ğŸ”„

| Capability | Trigger | Status |
|------------|---------|--------|
| CA-125 Kinetics | >25% rise | ğŸ”„ Building |
| ctDNA Monitoring | Variant reappearance | ğŸ”„ Building |
| Treatment Response | RECIST criteria | ğŸ”„ Building |

---

## ğŸ”„ AGENT STATUS

### âœ… INTEGRATED (7/14 agents)

- âœ… **02_BIOMARKER** - TMB, MSI, HRD calculation
- âœ… **03_RESISTANCE** - MAPK, DDR pathways, validated (RR=1.97)
- âœ… **05_TRIAL_MATCHING** - Mechanism-based matching
- âœ… **07_CARE_PLAN** - Unified care plan generation
- âœ… **08_MONITORING** - Risk-based monitoring setup
- âœ… **10_STATE_MANAGEMENT** - Orchestrator core
- âœ… **11_API_CONTRACTS** - All endpoints defined
- âœ… **14_SYNTHETIC_LETHALITY** - SL/Essentiality analysis

### â³ SKELETON (3/14 agents)

- â³ **01_DATA_EXTRACTION** - Needs VCF/PDF/MAF parsers
- â³ **04_DRUG_EFFICACY** - Framework exists, needs orchestrator wiring
- â³ **06_NUTRITION** - Services exist, needs orchestrator wiring

### â¬œ TODO (4/14 agents)

- â¬œ **09_TRIGGER_SYSTEM** - Event automation
- â¬œ **12_UI_DASHBOARD** - Frontend integration (30% - OrchestratorDashboard verified)
- â¬œ **13_SECURITY_COMPLIANCE** - Security hardening
- â¬œ **15_ACCESS_ADVOCACY** - Prior auth & financial
- â¬œ **16_TOXICITY_RISK** - Germline-based toxicity

---

## ğŸš€ NEXT DELIVERABLES

### ğŸ”´ CRITICAL (Blocking)

1. **Data Extraction Agent** (4-6 hours)
   - VCF/PDF/MAF parsers
   - Blocks entire pipeline

2. **Drug Efficacy Integration** (8-10 hours)
   - Wire S/P/E framework to orchestrator
   - Core drug ranking

### ğŸŸ¡ HIGH PRIORITY

3. **Nutrition Integration** (4-6 hours)
   - Wire toxicity-aware nutrition services

4. **Universal Pages Integration** (9-13 days)
   - 4-phase plan defined

5. **Trigger System** (4-6 hours)
   - Event automation

**See:** [03_DELIVERABLES_PLAN.md](03_DELIVERABLES_PLAN.md) for complete breakdown

---

## ğŸ“š RELATED DOCUMENTS

- **[01_CURRENT_STATE.md](01_CURRENT_STATE.md)** - What's built, what works, what's missing
- **[02_FRONTEND_STATUS.md](02_FRONTEND_STATUS.md)** - Frontend dashboard verification
- **[03_DELIVERABLES_PLAN.md](03_DELIVERABLES_PLAN.md)** - Complete deliverables breakdown
- **[04_IMPLEMENTATION_ROADMAP.md](04_IMPLEMENTATION_ROADMAP.md)** - Phased implementation plan
- **[05_MASTER_BLUEPRINT.md](05_MASTER_BLUEPRINT.md)** - Complete workflow and architecture

---

**Document Status:** âœ… **MISSION DEFINED**  
**Last Updated:** January 28, 2025  
**Next Review:** After Deliverable 1 (Data Extraction) completion
