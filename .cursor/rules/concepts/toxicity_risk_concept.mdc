---
alwaysApply: false
description: Toxicity Risk (Germline) – Execution Doctrine (Jan 2025). Plain-language website copy + execution plan for in‑silico toxicity risk hints with MOAT integration (toxicity mitigation foods) and research intelligence (research‑mode).
globs: 
---


export const coPilotDetailsData: Record<string, CoPilotDetailContent> = {
  "toxicity-risk": {
    slug: "toxicity-risk",
    pageTitle: "Toxicity Risk (Germline): In‑Silico Side‑Effect Hints",
    heroSubtitle: "See simple, genetics‑aware side‑effect hints with toxicity‑mitigating food recommendations—plan conservatively before treatment (research‑mode).",
    vision: "Turn germline context into a plain, shareable caution signal with confidence, sources, and actionable mitigation strategies—so care teams can plan safer.",

    // Website value props (plain)
    valueProps: [
      {
        audience: 'For Radiation/Medical Oncology',
        icon: 'Shield',
        points: [
          'A simple caution hint when genetics suggest higher risk.',
          'Short text, confidence, sources, and mitigating food recommendations (RUO).',
          'A one‑page summary with actionable mitigation strategies to align the team.'
        ]
      },
      {
        audience: 'For Institutions',
        icon: 'FileText',
        points: [
          'Consistent, auditable outputs with run IDs.',
          'Reusable artifacts for QA and research.',
          'Safe path to deeper models when available.'
        ]
      }
    ],

    buildsOn: "What this runs on (today vs roadmap)",
    buildsOnStackPoints: [
      "**Today:** Insights + evidence cues mapped to toxicity risk hints with MOAT integration (mitigating foods).",
      "**Today:** Research intelligence framework for enhanced evidence gathering (pubmearch + pubmed_parser + LLM).",
      "**Optional today:** Cohort snippets (when available) to add context.",
      "**Roadmap:** Disease/regimen‑specific toxicity models and interaction checks."
    ],

    genomicInsightsOverview: "Our live stack (research‑mode) produces a compact 'Toxicity Risk' chip with a short helper, confidence, sources, and mitigating food recommendations—plus run ID and profile.",
    coreProblemIntro: "Toxicities are hard to foresee. We surface a simple, genetics‑aware caution with actionable mitigation strategies to inform planning—without slowing care.",
    coreProblemPoints: [
      "Risk is unclear at baseline.",
      "Signals are scattered across sources.",
      "Hard to share a concise, trusted summary.",
      "Even when risk is identified, mitigation strategies are unclear."
    ],

    genomicUseCasesGrid: [
      { label: "Caution chip (simple)", iconName: "AlertTriangle", color: "text-red-400" },
      { label: "Short helper text", iconName: "MessageSquare", color: "text-green-400" },
      { label: "Confidence + sources", iconName: "ShieldCheck", color: "text-purple-400" },
      { label: "Mitigating foods (MOAT)", iconName: "Apple", color: "text-blue-400" },
      { label: "Cohort overlay (optional)", iconName: "Users", color: "text-orange-400" }
    ],

    keyCapabilities: [
      {
        title: "Caution Signal + Mitigation (live)",
        technical: "We map germline context and evidence to a plain caution chip with a short helper. Output includes confidence, sources, mitigating foods (MOAT), and provenance (run ID, profile).",
        scientific: "Signals summarize potential sensitivity based on repair/inflammation and related pathways. Mitigating foods mapped to toxicity pathways (DNA repair → NAC/Vitamin D, Inflammation → Omega-3/Curcumin, Cardiometabolic → CoQ10); RUO and transparent.",
        business: `
- **Plan safer:** A simple hint that's easy to act on.
- **Actionable:** Mitigating food recommendations included.
- **Trustable:** Confidence + sources in a one‑pager.
`,
        genomicUseCasesParagraph: "Today: \n1. **Caution chip** with helper and confidence. \n2. **Mitigating foods** mapped to detected toxicity pathways. \n3. **Provenance** visible on the card."
      },
      {
        title: "Context & Evidence (live; enhanced)",
        technical: "When extracted, we show a small cohort snippet and citations/badges to anchor the signal. Research intelligence framework (pubmearch + pubmed_parser + LLM) enhances evidence gathering for complex questions.",
        scientific: "Grounds the hint without overclaiming; still RUO. Research intelligence enables full-text parsing, keyword hotspot analysis, and LLM synthesis for better evidence quality.",
        business: `
- **Context:** Helps teams calibrate decisions.
- **Enhanced Evidence:** Research intelligence provides deeper literature analysis.
`,
        genomicUseCasesParagraph: "Today (when present): \n1. **Cohort snippet** and **key refs** alongside the chip. \n2. **Research intelligence** for enhanced evidence gathering (optional)."
      },
      {
        title: "Toxicity Mitigation Integration (live)",
        technical: "Food validation endpoint (`/api/hypothesis/validate_food_dynamic`) checks if foods mitigate detected toxicity. Returns `toxicity_mitigation` field when compound matches mitigating foods from toxicity risk assessment.",
        scientific: "Connects toxicity risk assessment to food validation—when a food is validated, it checks if it mitigates any detected toxicity pathways from patient's germline profile and current medications.",
        business: `
- **Integrated Care:** Toxicity risk → mitigation recommendations in one flow.
- **Actionable:** Foods validated with toxicity mitigation context.
`,
        genomicUseCasesParagraph: "Today: \n1. **Toxicity risk** returns mitigating foods. \n2. **Food validation** checks toxicity mitigation match. \n3. **Unified view** of risk + mitigation."
      },
      {
        title: "Regimen‑Specific Models (roadmap)",
        technical: "Planned: regimen/dose‑aware toxicity models and interaction checks layered on top of the basic hint.",
        scientific: "Future: combine pharmacology and outcomes to refine risk.",
        business: `
- **Consistency:** Make safety checks a standard step.
`,
        genomicUseCasesParagraph: "Roadmap: regimen‑aware checks surfaced in the same view."
      }
    ],

    valuePropositionSections: [
      {
        audience: "For the Care Team",
        points: [
          "A quick, genetics‑aware caution to guide planning.",
          "Short, shareable text with confidence, sources, and mitigating food recommendations (RUO).",
          "Actionable mitigation strategies mapped to detected toxicity pathways.",
          "Reusable one‑pager with run ID and profile."
        ]
      },
      {
        audience: "For Nutrition Planning",
        points: [
          "Food validation automatically checks toxicity mitigation.",
          "Mitigating foods recommended based on germline profile + current medications.",
          "Dosage, timing, and mechanism included for each recommendation."
        ]
      }
    ],

    conclusion: "In‑silico toxicity risk that's simple to read and easy to share. A plain caution chip. Clear confidence. Sources included. Actionable mitigation strategies. Research‑mode by design."
  },
};


# Toxicity Risk (Germline) – Execution Doctrine (Jan 2025)

This rule describes how to deliver the toxicity caution signal now using insights and evidence with transparent provenance, plus MOAT integration for toxicity mitigation.

## What we can deliver today (research‑grade)
- A 'Toxicity Risk' chip with:
  - **Helper text:** one sentence in plain language.
  - **Evidence (core):** Confidence · Evidence Tier (if enabled) · Sources (count + key refs) · Provenance (run_id, profile).
  - **Mitigating foods (MOAT):** List of foods that mitigate detected toxicity pathways (DNA repair → NAC/Vitamin D, Inflammation → Omega-3/Curcumin, Cardiometabolic → CoQ10).

## Where the code lives (reused components)
- Safety router: `[safety.py](mdc:oncology-coPilot/oncology-backend-minimal/api/routers/safety.py)` - `/api/safety/toxicity_risk` endpoint
- Toxicity pathway mappings: `[toxicity_pathway_mappings.py](mdc:oncology-coPilot/oncology-backend-minimal/api/services/toxicity_pathway_mappings.py)` - `get_mitigating_foods()` function
- Safety service: `[safety_service.py](mdc:oncology-coPilot/oncology-backend-minimal/api/services/safety_service.py)` - `compute_toxicity_risk()` method
- Food validator: `[hypothesis_validator.py](mdc:oncology-coPilot/oncology-backend-minimal/api/routers/hypothesis_validator.py)` - `/api/hypothesis/validate_food_dynamic` with toxicity mitigation check
- Research intelligence: `[research_intelligence/orchestrator.py](mdc:oncology-coPilot/oncology-backend-minimal/api/services/research_intelligence/orchestrator.py)` - Enhanced evidence gathering
- Insights router: `[insights.py](mdc:oncology-coPilot/oncology-backend-minimal/api/routers/insights.py)`
- Evidence + ClinVar proxy: `[evidence.py](mdc:oncology-coPilot/oncology-backend-minimal/api/routers/evidence.py)`

## How to run toxicity hint now
Embed toxicity as a small card in VUS/Radiation/Chemo flows when germline context is present. Sources, provenance, and mitigating foods included.

Example (Toxicity Risk Assessment):
```bash
curl -X POST "http://127.0.0.1:8000/api/safety/toxicity_risk" \
  -H "Content-Type: application/json" \
  -d '{
    "patient": {
      "germlineVariants": [
        {"chrom": "17", "pos": 41276045, "ref": "A", "alt": "G", "gene": "BRCA1"}
      ]
    },
    "candidate": {
      "type": "drug",
      "moa": "platinum_agent"
    },
    "context": {
      "disease": "ovarian_cancer"
    }
  }'
```

Example (Food Validation with Toxicity Mitigation):
```bash
curl -X POST "http://127.0.0.1:8000/api/hypothesis/validate_food_dynamic" \
  -H "Content-Type: application/json" \
  -d '{
    "compound": "NAC",
    "disease_context": {
      "disease": "ovarian_cancer_hgs",
      "mutations": [{"gene": "BRCA1"}]
    },
    "patient_medications": ["carboplatin"]
  }'
```

## Methodology (simple, transparent)
- **Signals:** Map germline context to a conservative caution (repair/inflammation and related pathways).
- **Text:** One‑line helper explains why the hint appears.
- **Evidence:** Citations/badges when enabled; always include provenance.
- **Mitigation (MOAT):** Map detected toxicity pathways to mitigating foods:
  - DNA repair stress → NAC, Vitamin D3, Folate
  - Inflammation → Omega-3, Curcumin, EGCG
  - Cardiometabolic → CoQ10, L-Carnitine, Magnesium
- **Integration:** Food validation checks if compound mitigates detected toxicity from patient's medications.

## Frontend integration (no schema change required)
- Render a small "Toxicity Risk" chip with helper, confidence, sources, and provenance.
- Display mitigating foods list (if available) with dosage, timing, and mechanism.
- Optional: cohort snippet when available.
- Food validation response includes `toxicity_mitigation` field when compound matches mitigating foods.

## Current limitations (transparent)
- Not a diagnostic; research‑mode only. Signals are conservative and generic.
- Literature cues may be sparse in dev; keep text short and sourced when enabled.
- Mitigating foods are mapped to pathways, not patient-specific outcomes (RUO).
- Research intelligence requires NCBI API keys and may have rate limits.

## Success criteria
- Clear chip with helper and confidence.
- Sources and run ID present; easy to export.
- Mitigating foods displayed when toxicity pathways detected.
- Food validation shows toxicity mitigation match when applicable.
- Optional cohort snippet visible when available.

## MOAT Integration (THE COMPETITIVE ADVANTAGE)
- **Toxicity Risk → Mitigating Foods:** `/api/safety/toxicity_risk` returns `mitigating_foods` field.
- **Food Validation → Toxicity Check:** `/api/hypothesis/validate_food_dynamic` checks if food mitigates detected toxicity.
- **Unified View:** Risk assessment + mitigation recommendations in one flow.
- **Research Intelligence:** Enhanced evidence gathering for complex questions (optional).

## Example Flow
1. Patient on carboplatin with BRCA1 variant → `/api/safety/toxicity_risk` returns HIGH risk (DNA repair pathway).
2. Mitigating foods returned: NAC, Vitamin D3, Folate (DNA repair support).
3. Validate NAC → `/api/hypothesis/validate_food_dynamic` returns `toxicity_mitigation: { mitigates: true, target_drug: "carboplatin", pathway: "dna_repair" }`.
4. Frontend displays: "NAC mitigates carboplatin DNA repair stress" badge.

