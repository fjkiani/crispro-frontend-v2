---
title: VUS DDR Discovery Dataset Handoff (Scenario A/C)
status: active
last_updated: 2025-12-12
owner: Zo/Manager handoff
---

## Goal

Generate and use a **deterministic, local** candidate dataset to prove **Scenario A/C**:

- **ClinVar is non-decisive** (VUS / Conflicting / Not provided / missing)
- **Evo2 resolves via ML** (`resolution_path = "evo2"`) with **non-null** `min_delta`
- Run with **patient context** `patient_genes=["MBD4","TP53"]` so `pathway_relevance` is computed as **high** for DDR genes.

This is the “VUS knife” proof for the 40% problem in oncology, focused on **PARP eligibility gatekeepers**.

## Source of truth (local)

- **ClinVar**: `oncology-coPilot/oncology-backend-minimal/variant_summary.txt.gz`
  - This file **does not contain HGVS columns** in this repo copy.
  - Use VCF-style columns instead: `Chromosome`, `PositionVCF`, `ReferenceAlleleVCF`, `AlternateAlleleVCF`, plus `Assembly`.

## Candidate dataset produced (already generated)

- **File**: `oncology-coPilot/oncology-backend-minimal/results/vus_candidate_sets/ddr_clinvar_nondecisive_grch38_snvs.tsv`
- **Rows**: 32,911 unique candidates (GRCh38 SNVs only)
- **Genes (DDR allowlist)**:
  - `BRCA1, BRCA2, RAD51C, RAD51D, PALB2, ATM, CHEK2, MBD4`

Per-gene counts (from generation run):
- `ATM: 8946`
- `BRCA2: 9026`
- `BRCA1: 6967`
- `PALB2: 3217`
- `CHEK2: 2068`
- `RAD51C: 1128`
- `RAD51D: 995`
- `MBD4: 564`

## Filters used (documented so results are reproducible)

- **Assembly**: `GRCh38` only
- **Variant type**: SNVs only (`len(ref)==1 && len(alt)==1`)
- **ClinVar “non-decisive”**: ClinicalSignificance contains:
  - `Uncertain significance`
  - `Conflicting classifications of pathogenicity`
  - or is `-` / `Not provided` / empty

## Dataset schema (TSV columns)

`gene, assembly, chrom, pos, ref, alt, type, clinical_significance, review_status, clin_sig_simple, allele_id, variation_id, rsid`

## How to run the Scenario A/C benchmark (agent command)

From `oncology-coPilot/oncology-backend-minimal/`:

1) Start backend (example port `8157`):

```bash
/Users/fahadkiani/Desktop/development/crispr-assistant-main/venv/bin/python -m uvicorn main:app --port 8157 --host 127.0.0.1
```

2) Run discovery/benchmark using the dataset:

```bash
python3 scripts/vus/benchmark_vus_identify.py \
  --base-url http://127.0.0.1:8157 \
  --mode discover \
  --patient-genes MBD4,TP53 \
  --gene-allowlist BRCA1,BRCA2,RAD51C,RAD51D,PALB2,ATM,CHEK2,MBD4 \
  --candidate-tsv results/vus_candidate_sets/ddr_clinvar_nondecisive_grch38_snvs.tsv \
  --top-n 10 \
  --max-per-gene 200
```

## Expected outputs (“receipts”)

The run writes an artifact directory under:
- `results/vus_bench/<timestamp>/`

Expected contents:
- `run_manifest.json` (aggregate receipts)
- `report.json` (summary metrics)
- per-case JSON receipts (one file per chosen candidate)

Each case receipt should include:
- `resolution_path` (**must be `evo2`** for Scenario A/C proof)
- `sequence.min_delta` (**must be non-null**)
- `coverage.clinvar.classification` (**VUS/Conflicting/Not provided/missing**)
- `pathway_context.patient_actionable_axis` (should be `DDR` for patient_genes MBD4/TP53)
- `pathway_context.variant_axis` (DDR for these genes)
- `pathway_context.pathway_relevance` (should be `high`)
- `provenance.calls.*` showing the backend actually called:
  - `clinvar` (or returned “no hit”)
  - `evo.score_variant_multi`
  - `insights.*` as applicable

## Notes / gotchas

- If you see Evo2 `400 Bad Request` errors: they are almost always **REF allele mismatch** (assembly mismatch). The Evo proxy is expected to be strict; any fallback must be **explicitly logged** (never silent).
- We intentionally constrain to **GRCh38 SNVs** here to keep the benchmark honest and comparable.


owner: Zo/Manager handoff
---

## Goal

Generate and use a **deterministic, local** candidate dataset to prove **Scenario A/C**:

- **ClinVar is non-decisive** (VUS / Conflicting / Not provided / missing)
- **Evo2 resolves via ML** (`resolution_path = "evo2"`) with **non-null** `min_delta`
- Run with **patient context** `patient_genes=["MBD4","TP53"]` so `pathway_relevance` is computed as **high** for DDR genes.

This is the “VUS knife” proof for the 40% problem in oncology, focused on **PARP eligibility gatekeepers**.

## Source of truth (local)

- **ClinVar**: `oncology-coPilot/oncology-backend-minimal/variant_summary.txt.gz`
  - This file **does not contain HGVS columns** in this repo copy.
  - Use VCF-style columns instead: `Chromosome`, `PositionVCF`, `ReferenceAlleleVCF`, `AlternateAlleleVCF`, plus `Assembly`.

## Candidate dataset produced (already generated)

- **File**: `oncology-coPilot/oncology-backend-minimal/results/vus_candidate_sets/ddr_clinvar_nondecisive_grch38_snvs.tsv`
- **Rows**: 32,911 unique candidates (GRCh38 SNVs only)
- **Genes (DDR allowlist)**:
  - `BRCA1, BRCA2, RAD51C, RAD51D, PALB2, ATM, CHEK2, MBD4`

Per-gene counts (from generation run):
- `ATM: 8946`
- `BRCA2: 9026`
- `BRCA1: 6967`
- `PALB2: 3217`
- `CHEK2: 2068`
- `RAD51C: 1128`
- `RAD51D: 995`
- `MBD4: 564`

## Filters used (documented so results are reproducible)

- **Assembly**: `GRCh38` only
- **Variant type**: SNVs only (`len(ref)==1 && len(alt)==1`)
- **ClinVar “non-decisive”**: ClinicalSignificance contains:
  - `Uncertain significance`
  - `Conflicting classifications of pathogenicity`
  - or is `-` / `Not provided` / empty

## Dataset schema (TSV columns)

`gene, assembly, chrom, pos, ref, alt, type, clinical_significance, review_status, clin_sig_simple, allele_id, variation_id, rsid`

## How to run the Scenario A/C benchmark (agent command)

From `oncology-coPilot/oncology-backend-minimal/`:

1) Start backend (example port `8157`):

```bash
/Users/fahadkiani/Desktop/development/crispr-assistant-main/venv/bin/python -m uvicorn main:app --port 8157 --host 127.0.0.1
```

2) Run discovery/benchmark using the dataset:

```bash
python3 scripts/vus/benchmark_vus_identify.py \
  --base-url http://127.0.0.1:8157 \
  --mode discover \
  --patient-genes MBD4,TP53 \
  --gene-allowlist BRCA1,BRCA2,RAD51C,RAD51D,PALB2,ATM,CHEK2,MBD4 \
  --candidate-tsv results/vus_candidate_sets/ddr_clinvar_nondecisive_grch38_snvs.tsv \
  --top-n 10 \
  --max-per-gene 200
```

## Expected outputs (“receipts”)

The run writes an artifact directory under:
- `results/vus_bench/<timestamp>/`

Expected contents:
- `run_manifest.json` (aggregate receipts)
- `report.json` (summary metrics)
- per-case JSON receipts (one file per chosen candidate)

Each case receipt should include:
- `resolution_path` (**must be `evo2`** for Scenario A/C proof)
- `sequence.min_delta` (**must be non-null**)
- `coverage.clinvar.classification` (**VUS/Conflicting/Not provided/missing**)
- `pathway_context.patient_actionable_axis` (should be `DDR` for patient_genes MBD4/TP53)
- `pathway_context.variant_axis` (DDR for these genes)
- `pathway_context.pathway_relevance` (should be `high`)
- `provenance.calls.*` showing the backend actually called:
  - `clinvar` (or returned “no hit”)
  - `evo.score_variant_multi`
  - `insights.*` as applicable

## Notes / gotchas

- If you see Evo2 `400 Bad Request` errors: they are almost always **REF allele mismatch** (assembly mismatch). The Evo proxy is expected to be strict; any fallback must be **explicitly logged** (never silent).
- We intentionally constrain to **GRCh38 SNVs** here to keep the benchmark honest and comparable.

