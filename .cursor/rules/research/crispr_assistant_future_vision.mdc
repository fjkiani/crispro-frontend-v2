---
description:
globs:
alwaysApply: false
---
# Vision: Evolving the CRISPR Assistant towards a Digital Twin for Therapeutic Design

## 1. Inspiration and Goal

Inspired by advanced "digital twin" platforms in healthcare that model complex human physiology and therapeutic responses, this document outlines a strategic vision for the `CRISPR Therapeutic Design Assistant`. The goal is to evolve our assistant into a more powerful, predictive, and personalized tool for designing and de-risking CRISPR-based therapies. This vision builds upon our current production app (React frontend + FastAPI backend) and the live endpoints we already operate (Insights, Efficacy, Evo proxy, optional Fusion), while paving the path to richer simulation.

### What exists today (research‑mode, live)
- Backend (FastAPI):
  - Insights: `/api/insights/predict_protein_functionality_change`, `/predict_chromatin_accessibility`, `/predict_gene_essentiality`, `/predict_splicing_regulatory`
  - Efficacy orchestrator: `/api/efficacy/predict` (returns per‑drug `efficacy_score`, `confidence`, `evidence_tier`, `badges`, `insights`, `rationale`, `citations`, `provenance`)
  - Evo proxy: `/api/evo/score_variant_multi`, `/score_variant_exon`, `/score_delta` (1B default, spam‑safe gates)
  - Fusion (optional): AlphaMissense prior integration via a Modal service; gated and logged
  - Datasets (research): extraction endpoints for cBio/GDC; HRD AUPRC harness
- Frontend (Oncology Co‑Pilot):
  - VUS Explorer (under Mutation Explorer): per‑variant insight chips, rationale, actions (Dossier, WIWFM, Design)
  - Myeloma Digital Twin: WIWFM flow rendering per‑drug ranking with confidence/badges/insights
  - Dossier: variant insights, provenance, chips
  - Presentation slides: investor‑friendly S/P/E framing and Fusion profile view

## 2. Core Pillars for Enhancement

This evolution will focus on integrating capabilities analogous to those found in sophisticated digital twin systems, tailored to the specifics of CRISPR therapy development.

### Pillar 1: Deep Personalization & Multi‑Factorial Analysis

*   **Current State:** We focus on genomic signals (Evo2 delta proxy, insights bundle) to power VUS triage and WIWFM. Inputs include coordinates (GRCh38), HGVS, and gene + protein change. User input drives context.
*   **Future Vision:**
    *   **Enhanced Data Integration:** Gradually incorporate more data types beyond sequence:
        *   Patient-specific genetic variations (e.g., SNPs that might affect guide binding or repair outcomes).
        *   (Future) Transcriptomic/proteomic context to understand the target environment better.
    *   **Contextual Simulation:** Add simulation endpoints (server) that accept this richer context (e.g., off‑target analysis, delivery heuristics) and surface results in the CRISPR card.
    *   **UI Integration:** Extend `src/components/vus/*` to accept linked context (cohort flags, tissues) and render hints without jargon.
*   **Benefit:** More precise, context‑aware guidance for design and therapy selection.

### Pillar 2: Predictive Simulation of Therapeutic Outcomes

*   **Current State:** Qualitative, conservative guidance; efficacy orchestrator aggregates S/P/E signals; CRISPR card shows conceptual recommendations and deep‑links.
*   **Future Vision:**
    *   **Quantitative Modeling:** Develop and integrate more quantitative models for:
        *   **On‑target activity:** Predict cutting/repair tendencies (NHEJ vs HDR proxy) from spacer/context.
        *   **Off‑target propensity & impact:** Move beyond counts to functional consequence estimates.
        *   **Delivery Dynamics:** Early heuristics (vector fit hints), evolving to models.
        *   **Early PK/PD Indicators:** Long‑term, abstract cellular response proxies.
    *   **Simulation Suite:** New `/api/simulation/*` endpoints invoked from the CRISPR card; results cached and explained with plain labels.
*   **Benefit:** Robust in‑silico testing to optimize and de‑risk before wet‑lab.

### Pillar 3: Comprehensive Biological Knowledge Integration

*   **Current State:** Evidence is integrated conservatively into efficacy (badges, citations). Literature is gated for stability. ClinVar prior and AM coverage are being added to VUS Explorer.
*   **Future Vision:**
    *   **Structured Knowledge Sources:** Integrate more structured biological knowledge:
        *   Gene-disease associations, pathway information, drug target data.
        *   Protein domains, regulatory elements, and their functional implications for editing.
    *   **Enhanced Context:** Use structured knowledge to power rationale/citations and to target simulations.
    *   **Knowledge‑Driven Simulations:** Combine sequence signals with knowledge to predict pathway‑level impacts of edits.
*   **Benefit:** Deeper, transparent explanations and better risk assessment.

### Pillar 4: Advanced Therapeutic Challenge Navigation

*   **Current State:** CRISPR card provides conceptual next steps; efficacy provides therapy fit; design deep‑link available.
*   **Future Vision:**
    *   **Proactive Risk/Challenge Identification:** Proactively flag design risks (e.g., off‑target hotspots, delivery concerns) and suggest mitigations.
    *   **Mitigation Strategies:** Suggest evidence-based mitigation strategies or alternative approaches.
    *   **Regulatory Considerations:** (Long‑term) Capture design provenance for IND‑grade traceability in Dossier.
*   **Benefit:** A practical partner for translational research with audit trails.

### Pillar 5: Data-Driven Iteration and Learning (System-Level)

*   **Current State:** We track lessons and wiring plans via `.cursorrules` and rule docs; we cache upstream calls and capture run IDs for reproducibility.
*   **Future Vision:**
    *   **Feedback Loops:** Design mechanisms for (anonymized and consensual, if applicable) feedback to improve models. For example, if users can report actual experimental outcomes, this data could be used to refine predictive algorithms.
    *   **Continuous Model Improvement:** Systematically update knowledge sources and simulation parameters as new research emerges; version endpoints and record provenance in responses.
*   **Benefit:** An assistant that learns and remains reproducible.

## 3. Strategic Implications

Adopting this vision means:
*   **Prioritizing simulation endpoints** under FastAPI (e.g., `/api/simulation/*`) to complement Insights/Efficacy.
*   **Investing in structured knowledge representation** to enrich rationale and simulations.
*   **Designing the React UI to scale gracefully** (VUS Explorer CRISPR card as a hub; Dossier/WIWFM as consumers of provenance‑rich outputs).
*   **Treating current endpoints and components** as the foundation for a full in‑silico platform.

This evolution will significantly enhance the value of the CRISPR Therapeutic Design Assistant, moving it from today’s research‑mode guidance to a comprehensive *in silico* platform for designing next‑generation therapies—while keeping results transparent and reproducible.
