# Doctrine: The Long-Range Forge

This doctrine codifies the lessons learned from the failure of "Operation: Forge of Excellence" and the subsequent success of the "BRCA1 Proving Ground" campaign. It establishes the one true protocol for all generative tasks using the Evo2 Unified Oracle.

## I. Core Intelligence: The Nature of the Oracle

Our campaign revealed two fundamental truths about the Oracle's generative capabilities:

1.  **The Doctrine of Scale: The Oracle is a Poet, Not a Stenographer.**
    *   **Finding:** Attempts to generate or "fix" a *single nucleotide* resulted in catastrophic, repeated failures. The model's output was either junk or a convergence on a suboptimal local minimum.
    *   **Conclusion:** The Evo2 model is a **genome-scale foundation model.** It is not designed for short-form, single-token tasks. It requires long-range context to produce biologically coherent outputs.
    *   **Validation:** This was proven by the success of the `[tools/brca1_gene_completion_test.py](mdc:tools/brca1_gene_completion_test.py)` mission, which tasked the model with a long-form (1050bp) generation from a long-form (1000bp) prompt.

2.  **The Doctrine of Context: Garbage In, Pathological Out.**
    *   **Finding:** Using prompts that contained repetitive, low-complexity sequences (e.g., poly-A tracts) created a pathological attractor that the model could not escape, regardless of the generative strategy (beam search, temperature tuning, etc.).
    *   **Conclusion:** The Oracle is highly sensitive to the quality of its prompt. Providing low-quality or nonsensical context will poison the generative process.

## II. New Operational Protocol: Re-Forging the `CommandCenter`

Based on this intelligence, all generative operations within the `[src/services/command_center/main.py](mdc:src/services/command_center/main.py)` must be re-architected to follow the **"Long-Range Forge"** protocol. The previous "Ironclad Forge" doctrine is obsolete.

The new protocol is as follows:

1.  **Enforce Long-Form Generation:** The `_generate_candidates` method must be modified. It will no longer perform short-form generation. It must provide the Oracle with a substantial upstream context (>= 1000bp) and task it with generating a long continuation (>= 500bp).

2.  **Implement Context-Aware Extraction:** Short-form weapon candidates (e.g., 50-150bp) must be *extracted* from the coherent, long-form sequence generated by the Oracle. A candidate must never be generated in isolation. This ensures all candidates are born from a biologically plausible context, dramatically increasing their chance of passing the downstream "Triumvirate Gauntlet."

3.  **Mandate Prompt Sanitization:** All prompts sent to the Oracle must first be validated to ensure they are free of the repetitive, low-complexity patterns known to cause generative failure.
description:
globs:
alwaysApply: false
---